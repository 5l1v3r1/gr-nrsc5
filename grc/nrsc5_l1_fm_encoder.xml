<?xml version="1.0"?>
<block>
  <name>Layer 1 FM encoder</name>
  <key>nrsc5_l1_fm_encoder</key>
  <category>[NRSC-5]</category>
  <import>import nrsc5</import>
  <make>nrsc5.l1_fm_encoder($psm)</make>
  <param>
    <name>Primary mode</name>
    <key>psm</key>
    <type>enum</type>
    <hide>none</hide>
    <option>
      <name>MP1</name>
      <key>1</key>
      <opt>port1_vlen:146176</opt>
      <opt>port2_optional:1</opt>
      <opt>port2_hide:all</opt>
      <opt>port2_vlen:</opt>
      <opt>port3_optional:1</opt>
      <opt>port3_hide:all</opt>
      <opt>port3_vlen:</opt>
    </option>
    <option>
      <name>MP2</name>
      <key>2</key>
      <opt>port1_vlen:146176</opt>
      <opt>port2_optional:0</opt>
      <opt>port2_hide:</opt>
      <opt>port2_vlen:2304</opt>
      <opt>port3_optional:1</opt>
      <opt>port3_hide:all</opt>
      <opt>port3_vlen:</opt>
    </option>
    <option>
      <name>MP3</name>
      <key>3</key>
      <opt>port1_vlen:146176</opt>
      <opt>port2_optional:0</opt>
      <opt>port2_hide:</opt>
      <opt>port2_vlen:4608</opt>
      <opt>port3_optional:1</opt>
      <opt>port3_hide:all</opt>
      <opt>port3_vlen:</opt>
    </option>
    <option>
      <name>MP11</name>
      <key>11</key>
      <opt>port1_vlen:146176</opt>
      <opt>port2_optional:0</opt>
      <opt>port2_hide:</opt>
      <opt>port2_vlen:4608</opt>
      <opt>port3_optional:0</opt>
      <opt>port3_hide:</opt>
      <opt>port3_vlen:4608</opt>
    </option>
  </param>
  <sink>
    <name>pids</name>
    <type>byte</type>
    <vlen>80</vlen>
  </sink>
  <sink>
    <name>pdu0</name>
    <type>byte</type>
    <vlen>$psm.port1_vlen</vlen>
  </sink>
  <sink>
    <name>pdu1</name>
    <type>byte</type>
    <vlen>$psm.port2_vlen</vlen>
    <optional>$psm.port2_optional</optional>
    <hide>$psm.port2_hide</hide>
  </sink>
  <sink>
    <name>pdu2</name>
    <type>byte</type>
    <vlen>$psm.port3_vlen</vlen>
    <optional>$psm.port3_optional</optional>
    <hide>$psm.port3_hide</hide>
  </sink>
  <source>
    <name>out</name>
    <type>byte</type>
  </source>
</block>
